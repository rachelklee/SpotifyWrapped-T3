
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
</head>
<body>
    <h2>User Profile</h2>
    <table border="1">
        <tr>
            <th>Username</th>
            <td>{{ user.username }}</td>
        </tr>
    </table>
     <ul>
        {% for wrap in wraps_list %}
            <li>
                <b>{{ wrap.album }}</b> by <i>{{ wrap.artist }}</i>
                {% if wrap.preview_url %}
                    <button onclick="playPreview('{{ wrap.preview_url }}', '{{ wrap.album }}')">Play</button>
                {% else %}
                    <span>No Preview Available</span>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
    <form method="post" action="{% url 'api:delete_wraps' %}">
        {% csrf_token %}
        <button type="submit">Delete Wraps</button>
    </form>
    <form method="post" action="{% url 'spotify:generate_wrap' %}">
        {% csrf_token %}
        <button type="submit">Get Wraps</button>
    </form>
    <form method="post" action="{% url 'spotify:generate_halloween_wrap' %}">
        {% csrf_token %}
        <button type="submit">Get Halloween Wrap</button>
    </form>
    <form method="post" action="{% url 'spotify:generate_christmas_wrap' %}">
        {% csrf_token %}
        <button type="submit">Get Christmas Wrap</button>
    </form>
    
</body>
<!-- Assuming this is in a base template thatâ€™s included on each page -->
<nav>
    <ul>
        <li><a href="{% url 'api:login_user' %}">Login</a></li>
        <li><a href="{% url 'api:register_user' %}">Register</a></li>
        <li><a href="{% url 'api:delete_user' %}">Delete Account</a></li>
        <li><a href="{% url 'api:display_user' %}">User profile</a></li>
        
        {% if user.is_authenticated %}
            <li><a href="{% url 'api:logout_user' %}">Logout</a></li>
        {% endif %}
    </ul>
</nav>

    <footer>
        <div id="audio-player">
            <p id="current-track">No track playing</p>
            <audio id="audio-control" controls style="width: 100%;">
                <source id="audio-source" src="" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
        </div>
    </footer>

    <script>
        const audioControl = document.getElementById('audio-control');
        const audioSource = document.getElementById('audio-source');
        const currentTrack = document.getElementById('current-track');

        function playPreview(url, trackName) {
            audioSource.src = url;
            audioControl.load();
            audioControl.play();
            currentTrack.textContent = `Now Playing: ${trackName}`;
        }
    </script>
</body>
</html>
