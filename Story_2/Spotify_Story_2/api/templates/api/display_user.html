<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Styled Slideshow</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: #d8ff4d;
      color: black;
      overflow: hidden;
    }

    .slideshow-container {
      display: flex;
        overflow: hidden;
      align-items: center;
      justify-content: center;
      height: 100vh;
      width: 100%;
    }

    .left-section {
      width: 40%;
      text-align: left;
      padding-left: 20px;
    }

    .left-section h1 {
        padding: 10px;
      font-size: 5rem;
      margin: 10px 0;
      color: magenta;
    }

    .right-section {

      width: 60%;
      text-align: center;
      position: relative;
    }

    .slide {
      display: none;
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
      cursor: pointer;
    }

    .slide.active {
      display: block;
    }

    .slide .artist-name {
      margin-top: 20px;
      font-size: 1.5rem;
      font-weight: bold;
    }

    .slide img {
        width: fit-content;
        height: fit-content;
        object-fit: fill;
    }
    .slide .album-name {
      margin-top: 10px;
      font-size: 1.2rem;
      color: gray;
    }

.arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: transparent;
  border: 2px solid black;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 0.3s, color 0.3s;
}

.arrow::before {
  content: '';
  width: 0;
  height: 0;
  border-style: solid;
  display: inline-block;
}

.arrow.left::before {
  border-width: 10px 14px 10px 0;
  border-color: transparent black transparent transparent;
}

.arrow.right::before {
  border-width: 10px 0 10px 14px;
  border-color: transparent transparent transparent black;
}

.arrow.left {
  left: 60px;
}

.arrow.right {
  right: 60px;
}

.arrow:hover {
  background-color: black;
  color: white;
}

.arrow:hover::before {
  border-color: transparent transparent transparent white;
}

.arrow:focus {
  outline: none;
}

  </style>
</head>
<body>
  <div class="slideshow-container">
    <div class="left-section">
      <h1>Your top songs</h1>
      <h1>Your top songs</h1>
        <h1>Your top songs</h1>
      <h1>Your top songs</h1>
        <h1>Your top songs</h1>
      <h1>Your top songs</h1>
        <h1>Your top songs</h1>
      <h1>Your top songs</h1>
        <h1>Your top songs</h1>
      <h1>Your top songs</h1>
    </div>

    <div class="right-section">
      <!-- Arrows -->
      <button class="arrow left" onclick="changeSlide(-1)"></button>
      <button class="arrow right" onclick="changeSlide(1)"></button>

      <!-- Dynamically Generated Slides -->
      {% for wrap in wraps_list %}
      <div class="slide {% if forloop.first %}active{% endif %}" data-preview-url="{{ wrap.preview_url }}">
        <div style="background-color: lightgray; width: 100%; height: 100%;"></div>
          <div>
              <img src="{{ wrap.image }}" alt="{{ wrap.album }}" style="width: 100%; height: 100%; object-fit: cover;">
          </div>
          <div class="album-name">{{ wrap.album }}</div>
          <div class="artist-name">{{ wrap.artist }}</div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- Audio Player -->
  <audio id="audio-control" style="display: none;">
    <source id="audio-source" src="" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const audioControl = document.getElementById('audio-control');
    const audioSource = document.getElementById('audio-source');

    function changeSlide(direction) {
      // Stop and reset audio playback
      audioControl.pause();
      audioControl.currentTime = 0;

      // Change the slide
      slides[currentSlide].classList.remove('active');
      currentSlide = (currentSlide + direction + slides.length) % slides.length;
      slides[currentSlide].classList.add('active');
    }

    // Play preview on slide click
    slides.forEach((slide) => {
      slide.addEventListener('click', () => {
        const previewUrl = slide.getAttribute('data-preview-url');
        if (previewUrl) {
          audioSource.src = previewUrl;
          audioControl.load();
          audioControl.play();
        } else {
          alert('No preview available for this song.');
        }
      });
    });
  </script>
</body>
</html>
